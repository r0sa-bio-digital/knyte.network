<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>knyte network</title>
  <link rel="stylesheet" href="app.css">
  <script>
    async function onLoad()
    {
      const editorElement = document.getElementById('editor');
      const response = await fetch(location.href);
      if (response.ok) {
        const selfcode = await response.text();
        editorElement.value = selfcode;
      }
      else
        console.warn(response.status);
    }
    
    async function onClickCommit()
    {
      // TODO: test on latest actual version
      const comment = prompt("Comment for changes being committed:");
      if (!comment)
        return;
      // TODO: post changes and comment
    }
  </script>
</head>
<body onload="onLoad();">
  <h1>knyte network self editor</h1>
  <textarea id="editor"></textarea>
  <div>
    <button onclick="onClickCommit();">commit</button>
  </div>
</body>
</html>
